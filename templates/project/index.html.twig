{% extends 'base.html.twig' %}

{% block title %}Liste des projets
{% endblock %}

{% block body %}
	<h4>
		<i class="fas fa-align-right me-3"></i>
		Liste des projets
	</h4>

	<section class="mb-4 text-end">
		<a class="btn btn-dark" href="{{ path('app_project_new') }}">Créer un nouveau projet</a>
	</section>

	<div class="container-table">
		<table class="table">
			<thead>
				<tr>
					<th></th>
					<th>Nom</th>
					<th>Période</th>
					<th></th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				{% for project in projects %}
					<tr>
						<td>
							<span>
								{% if project.status == constant('App\\Enum\\ProjectStatus::OK') %}
									<i class="fas fa-check"></i>
								{% elseif project.status == constant('App\\Enum\\ProjectStatus::EN_COURS') %}
									<i class="fas fa-spinner"></i>
								{% else %}
									<i class="fas fa-xmark"></i>
								{% endif %}
							</span>
						</td>
						<td>{{ project.name }}</td>
						<td>
							{{ project.startDate ? project.startDate|date('d/m/Y') : '' }}
							-
							{{ project.endDate ? project.endDate|date('d/m/Y') : '' }}
						</td>
						<td>
							<a class="btn btn-dark btn-rounded btn-add" data-mdb-tooltip-init title="Créer un échantillon" href="{{ path('app_sample_new', {'id': project.id}) }}">
								+
							</a>
						</td>
						<td>
							{% include '_partials/_partials_table_show.html.twig' with {
								'entity_type': 'project',
								'entity_id': project.id,
								'show_route': 'app_project_show'
							} %}</td>
					</tr>
				{% else %}
					<tr>
						<td colspan="7">Il n'y a pas encore de projet.</td>
					</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
{% endblock %}
